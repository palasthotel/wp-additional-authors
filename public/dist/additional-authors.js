(()=>{var e={703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,s){if(s!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},193:(e,t,n)=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=n(196)},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=function(e,t,n){void 0===n&&(n="click");var o=Object(r.useRef)(t);Object(r.useEffect)((function(){o.current=t})),Object(r.useEffect)((function(){var t=function(t){e&&e.current&&(t.target.shadowRoot?t.target.shadowRoot.contains(e.current)||o.current(t):e.current.contains(t.target)||o.current(t))};return document.addEventListener(n,t),document.addEventListener("touchstart",t),function(){document.removeEventListener(n,t),document.removeEventListener("touchstart",t)}}))}}])},196:e=>{"use strict";e.exports=window.React}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.plugins,r=window.wp.editPost;function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const a=window.wp.components;var s=n(193),i=n.n(s);const u=({display_name:t,onClick:n})=>(0,e.createElement)("div",{className:"additional-authors-author",onClick:n},t),c=({i18n:t,users:n,onFound:r})=>{const[s,c]=(0,e.useState)(""),[l,d]=(0,e.useState)(!1),[p,m]=(0,e.useState)([]),f=(0,e.useRef)();return i()(f,(()=>{d(!1)})),(0,e.useEffect)((()=>{m(n.filter((e=>""===s||e.display_name.toLowerCase().includes(s.toLowerCase()))))}),[s,n]),((t,n=[],r=!0)=>{(0,e.useEffect)((()=>{if(!r)return;const e=({key:e})=>{"Escape"===e&&t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),n)})((()=>{d(!1)}),[l],l),(0,e.createElement)(a.BaseControl,{className:"additional-authors--search-author"},(0,e.createElement)("div",{ref:f},(0,e.createElement)("div",{className:"additional-authors--search-authors__input-wrapper"},(0,e.createElement)(a.TextControl,{label:t.label,value:s,onChange:e=>{d(!0),c(e)},onFocus:()=>d(!0)})),l?(0,e.createElement)(a.Popover,{focusOnMount:!1,position:"bottom center"},p.length>0?p.map((t=>(0,e.createElement)(u,o({key:t.ID},t,{onClick:()=>{d(!1),r(t)}})))):(0,e.createElement)("p",{className:"additional-authors--search-author__no-results"},t.search_404)):null))},l=window.wp.data,d=()=>{const e=(0,l.useSelect)((e=>e("core/editor").getCurrentPost().author));return(0,l.useSelect)((e=>e("core/editor").getPostEdits().author))||e};var p=n(697),m=n.n(p);const f=({onClick:t})=>(0,e.createElement)("span",{className:"author-item__delete",onClick:t},"×"),h=({author:t})=>{const{ID:n,display_name:r}=t;return n>0?(0,e.createElement)("a",{href:`/wp-admin/user-edit.php?user_id=${n}`,target:"_blank"},r):r},v=({author:t,index:n,onUnselect:r,onChangePosition:o})=>(0,e.createElement)("div",{className:"author-item "+(t.ID<0?"is-new-author":"")},(0,e.createElement)("span",{className:"autor-item__name"},(0,e.createElement)(h,{author:t}),(0,e.createElement)("span",{className:"author-item__nicename"},t.user_nicename)),(0,e.createElement)(f,{onClick:r}),(0,e.createElement)("span",{className:"author-item__move author-item__up",onClick:()=>o(n-1)},"▲"),(0,e.createElement)("span",{className:"author-item__move author-item__down",onClick:()=>o(n+1)},"▼"));v.defaultProps={author:{ID:-1,display_name:"",user_login:""},className:""},v.propTypes={author:m().object.isRequired,index:m().number.isRequired,onUnselect:m().func.isRequired,onChangePosition:m().func.isRequired,isMainAuthor:m().bool.isRequired};const _=v,y=t=>{const{users:n,i18n:r}=t,o=d(),[a,s]=(()=>{const t=d(),n=(0,l.useSelect)((e=>e("core/editor").getCurrentPost().additional_authors)),r=(0,l.useSelect)((e=>e("core/editor").getPostEdits().additional_authors)),{editPost:o}=(0,l.useDispatch)("core/editor"),a=(r||n).filter((e=>parseInt(t)!==parseInt(e)));return(0,e.useEffect)((()=>{(a.includes(t+"")||a.includes(parseInt(t)))&&o(a.filter((e=>parseInt(e)!==parseInt(t))))}),[t,a]),[a,e=>{o({additional_authors:[t,...e]})}]})();return(0,e.createElement)("div",{style:{marginBottom:20}},(0,e.createElement)(c,{i18n:r,users:n.filter((e=>{const t=!a.includes(e.ID+"")&&!a.includes(parseInt(e.ID));return t||console.debug(e.ID,t),t&&parseInt(e.ID)!==parseInt(o)})),onFound:e=>{const t=[...new Set([...a,e.ID])];s(t),document.dispatchEvent(new CustomEvent("onAdditionalAuthorsChange",{detail:t.map((e=>n.find((t=>parseInt(t.ID)===parseInt(e)))))}))}}),(0,e.createElement)("div",null,a.filter((e=>parseInt(o)!==parseInt(e))).map(((t,r)=>(0,e.createElement)(_,{key:t,author:n.find((e=>parseInt(e.ID)===parseInt(t))),index:r,onChangePosition:e=>((e,t)=>{const n=a[e],r=a[t],o=[...a];o[e]=r,o[t]=n,s(o)})(r,e),onUnselect:()=>(e=>{s(a.filter((t=>parseInt(t)!==parseInt(e))))})(t),isMainAuthor:!1})))))};(0,t.registerPlugin)("post-status-info-test",{render:()=>(0,e.createElement)(r.PluginPostStatusInfo,null,(0,e.createElement)(y,AdditionalAuthors))})})()})();
//# sourceMappingURL=additional-authors.js.map