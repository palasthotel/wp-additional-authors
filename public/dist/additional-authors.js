(()=>{var e={49:(e,t,n)=>{"use strict";var r=n(257);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,s){if(s!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},507:(e,t,n)=>{e.exports=n(49)()},257:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.plugins,r=window.wp.editPost,a=window.wp.components,o=window.wp.element,s=({display_name:t,onClick:n})=>(0,e.createElement)("div",{className:"additional-authors-author",onClick:n},t),i=({i18n:t,users:n,onFound:r})=>{const[i,c]=(0,o.useState)(""),[l,u]=(0,o.useState)(!1),[d,p]=(0,o.useState)([]);return(0,o.useEffect)((()=>{p(n.filter((e=>""===i||e.display_name.toLowerCase().includes(i.toLowerCase()))))}),[i,n]),((e,t=[],n=!0)=>{(0,o.useEffect)((()=>{if(!n)return;const t=({key:t})=>{"Escape"===t&&e()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),t)})((()=>{u(!1)}),[l],l),(0,e.createElement)(a.BaseControl,{className:"additional-authors--search-author"},(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"additional-authors--search-authors__input-wrapper"},(0,e.createElement)(a.TextControl,{label:t.label,value:i,onChange:e=>{u(!0),c(e)},onFocus:()=>u(!0)})),l?(0,e.createElement)(a.Popover,{focusOnMount:!1,position:"bottom center"},d.length>0?d.map((t=>(0,e.createElement)(s,{key:t.ID,...t,onClick:()=>{u(!1),r(t)}}))):(0,e.createElement)("p",{className:"additional-authors--search-author__no-results"},t.search_404)):null))},c=window.wp.data,l=()=>{const e=(0,c.useSelect)((e=>e("core/editor").getCurrentPost().author));return(0,c.useSelect)((e=>e("core/editor").getPostEdits().author))||e};var u=n(507),d=n.n(u);const p=({onClick:t})=>(0,e.createElement)("span",{className:"author-item__delete",onClick:t},"×"),m=({author:t})=>{const{ID:n,display_name:r}=t;return n>0?(0,e.createElement)("a",{href:`/wp-admin/user-edit.php?user_id=${n}`,target:"_blank"},r):r},h=({author:t,index:n,onUnselect:r,onChangePosition:a})=>(0,e.createElement)("div",{className:"author-item "+(t.ID<0?"is-new-author":"")},(0,e.createElement)("span",{className:"autor-item__name"},(0,e.createElement)(m,{author:t}),(0,e.createElement)("span",{className:"author-item__nicename"},t.user_nicename)),(0,e.createElement)(p,{onClick:r}),(0,e.createElement)("span",{className:"author-item__move author-item__up",onClick:()=>a(n-1)},"▲"),(0,e.createElement)("span",{className:"author-item__move author-item__down",onClick:()=>a(n+1)},"▼"));h.defaultProps={author:{ID:-1,display_name:"",user_login:""},className:""},h.propTypes={author:d().object.isRequired,index:d().number.isRequired,onUnselect:d().func.isRequired,onChangePosition:d().func.isRequired,isMainAuthor:d().bool.isRequired};const _=h,f=t=>{const{users:n,i18n:r}=t,a=l(),[s,u]=(()=>{const e=l(),t=(0,c.useSelect)((e=>e("core/editor").getCurrentPost().additional_authors)),n=(0,c.useSelect)((e=>e("core/editor").getPostEdits().additional_authors)),{editPost:r}=(0,c.useDispatch)("core/editor"),a=(n||t).filter((t=>parseInt(e)!==parseInt(t)));return(0,o.useEffect)((()=>{(a.includes(e+"")||a.includes(parseInt(e)))&&r(a.filter((t=>parseInt(t)!==parseInt(e))))}),[e,a]),[a,t=>{r({additional_authors:[e,...t]})}]})();return(0,e.createElement)("div",{style:{marginBottom:20}},(0,e.createElement)(i,{i18n:r,users:n.filter((e=>{const t=!s.includes(e.ID+"")&&!s.includes(parseInt(e.ID));return t||console.debug(e.ID,t),t&&parseInt(e.ID)!==parseInt(a)})),onFound:e=>{const t=[...new Set([...s,e.ID])];u(t),document.dispatchEvent(new CustomEvent("onAdditionalAuthorsChange",{detail:t.map((e=>n.find((t=>parseInt(t.ID)===parseInt(e)))))}))}}),(0,e.createElement)("div",null,s.filter((e=>parseInt(a)!==parseInt(e))).map(((t,r)=>(0,e.createElement)(_,{key:t,author:n.find((e=>parseInt(e.ID)===parseInt(t))),index:r,onChangePosition:e=>((e,t)=>{const n=s[e],r=s[t],a=[...s];a[e]=r,a[t]=n,u(a)})(r,e),onUnselect:()=>(e=>{u(s.filter((t=>parseInt(t)!==parseInt(e))))})(t),isMainAuthor:!1})))))};(0,t.registerPlugin)("post-status-info-test",{render:()=>(0,e.createElement)(r.PluginPostStatusInfo,null,(0,e.createElement)(f,{...AdditionalAuthors}))})})()})();
//# sourceMappingURL=additional-authors.js.map