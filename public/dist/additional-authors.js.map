{"version":3,"file":"additional-authors.js","mappings":"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","sources":["webpack://@palasthotel/additional-authors/./node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/factoryWithThrowingShims.js","webpack://@palasthotel/additional-authors/./node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/index.js","webpack://@palasthotel/additional-authors/./node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://@palasthotel/additional-authors/webpack/bootstrap","webpack://@palasthotel/additional-authors/webpack/runtime/compat get default export","webpack://@palasthotel/additional-authors/webpack/runtime/define property getters","webpack://@palasthotel/additional-authors/webpack/runtime/hasOwnProperty shorthand","webpack://@palasthotel/additional-authors/external window \"React\"","webpack://@palasthotel/additional-authors/external window [\"wp\",\"plugins\"]","webpack://@palasthotel/additional-authors/external window [\"wp\",\"editPost\"]","webpack://@palasthotel/additional-authors/external window [\"wp\",\"components\"]","webpack://@palasthotel/additional-authors/external window [\"wp\",\"element\"]","webpack://@palasthotel/additional-authors/./src/gutenberg/Search.js","webpack://@palasthotel/additional-authors/./src/hooks/use-utils.js","webpack://@palasthotel/additional-authors/external window [\"wp\",\"data\"]","webpack://@palasthotel/additional-authors/./src/hooks/use-post.js","webpack://@palasthotel/additional-authors/./src/gutenberg/Author.js","webpack://@palasthotel/additional-authors/./src/gutenberg/Plugin.js","webpack://@palasthotel/additional-authors/./src/gutenberg.js"],"sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editPost\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","import {BaseControl, Popover, Spinner, TextControl} from \"@wordpress/components\";\nimport {useEffect, useState, useRef} from \"@wordpress/element\";\nimport { useEscapeKey } from \"../hooks/use-utils.js\";\nimport './Search.css'\n\nconst SearchResult = ({display_name, onClick})=>{\n    return <div\n        className=\"additional-authors-author\"\n        onClick={onClick}\n    >\n        {display_name}\n    </div>\n}\n\nconst Search = ({i18n, users, onFound})=>{\n\n    const [state, setState] = useState(\"\")\n    const [isVisible, setIsVisible] = useState(false);\n    const [results, setResults] = useState([]);\n\n    useEffect(()=>{\n        setResults(users.filter(u=>{\n            return state === \"\" || u.display_name.toLowerCase().includes(state.toLowerCase());\n        }));\n    }, [state, users]);\n\n\n    useEscapeKey(()=>{\n        setIsVisible(false)\n    }, [isVisible], isVisible)\n\n    return <BaseControl className=\"additional-authors--search-author\">\n        <div>\n            <div className=\"additional-authors--search-authors__input-wrapper\">\n                <TextControl\n                    label={i18n.label}\n                    value={state}\n                    onChange={(value)=>{\n                        setIsVisible(true)\n                        setState(value);\n                    }}\n                    onFocus={()=>setIsVisible(true)}\n                />\n            </div>\n\n            { isVisible ? (\n                <Popover\n                    focusOnMount={false}\n                    position=\"bottom center\"\n                >\n                    {results.length > 0 ?\n                        results.map(user=> <SearchResult\n                                key={user.ID}\n                                {...user}\n                                onClick={()=>{\n                                    setIsVisible(false);\n                                    onFound(user);\n                                }}\n                            />\n                        )\n                        :\n                        <p className=\"additional-authors--search-author__no-results\">{i18n.search_404}</p>\n                    }\n                </Popover>\n            ) : null}\n        </div>\n    </BaseControl>\n}\n\nexport default Search","import { useEffect, useState } from \"@wordpress/element\";\n\nexport const useDebounce = (value, delay) => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n    return debouncedValue;\n}\n\nexport const useEscapeKey = (callback, dependencies = [], enabled = true)=>{\n\n    useEffect(()=>{\n\n        if(!enabled) return;\n\n        const onKeyDown = ({key})=>{\n            if(key === \"Escape\") callback();\n        }\n        window.addEventListener('keydown', onKeyDown);\n        return ()=>{\n            window.removeEventListener('keydown', onKeyDown);\n        }\n    }, dependencies)\n}","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","import {useDispatch, useSelect} from '@wordpress/data';\nimport {useEffect} from \"@wordpress/element\";\n\n\nexport const usePost = ()=> useSelect(select => select(\"core/editor\").getCurrentPost(), undefined);\n\nexport const useMainAuthor = ()=>{\n    const author = useSelect(select => select(\"core/editor\").getCurrentPost().author);\n    const authorEdit = useSelect(select => select(\"core/editor\").getPostEdits().author);\n    return authorEdit || author;\n}\n\nexport const useAdditionalAuthors = ()=>{\n\n    const mainAuthor = useMainAuthor();\n    const authors = useSelect(select => select(\"core/editor\").getCurrentPost().additional_authors);\n    const authorsEdited = useSelect(select => select(\"core/editor\").getPostEdits().additional_authors);\n    const {editPost} = useDispatch(\"core/editor\");\n\n    const additionalAuthors = (authorsEdited || authors).filter(id => parseInt(mainAuthor) !== parseInt(id));\n\n    useEffect(()=>{\n        if(additionalAuthors.includes(mainAuthor+\"\") || additionalAuthors.includes(parseInt(mainAuthor))){\n            editPost(additionalAuthors.filter(id=> parseInt(id) !== parseInt(mainAuthor)));\n        }\n    }, [mainAuthor, additionalAuthors]);\n\n    return [\n        additionalAuthors,\n        (userIds)=>{\n            editPost({\n                additional_authors: [mainAuthor, ...userIds],\n            });\n        }\n    ]\n}","import PropTypes from 'prop-types';\nimport \"./Author.css\";\n\nconst Delete = ({onClick}) => {\n\treturn (\n\t\t<span\n\t\t\tclassName=\"author-item__delete\"\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t&times;\n\t\t</span>\n\t)\n}\n\nconst ProfileLink = ({author}) => {\n\tconst {ID,display_name} = author;\n\tif(ID > 0){\n\t\treturn <a href={`/wp-admin/user-edit.php?user_id=${ID}`} target=\"_blank\">{display_name}</a>\n\t}\n\treturn display_name\n}\n\nconst Author = ({author, index, onUnselect, onChangePosition})=>{\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`author-item ${(author.ID < 0)?\"is-new-author\":\"\"}`}\n\t\t>\n\t\t\t\t<span className=\"autor-item__name\">\n\t\t\t\t\t<ProfileLink author={author} />\n\t\t\t\t\t<span className=\"author-item__nicename\">{author.user_nicename}</span>\n\t\t\t\t</span>\n\n\t\t\t<Delete onClick={onUnselect} />\n\n\t\t\t<span\n\t\t\t\tclassName=\"author-item__move author-item__up\"\n\t\t\t\tonClick={()=>onChangePosition(index-1)}\n\t\t\t>\n\t\t\t\t\t▲\n\t\t\t\t</span>\n\t\t\t<span\n\t\t\t\tclassName=\"author-item__move author-item__down\"\n\t\t\t\tonClick={()=>onChangePosition(index+1)}\n\t\t\t>\n\t\t\t\t\t▼\n\t\t\t</span>\n\t\t</div>\n\t)\n\n}\n\n/**\n * property defaults\n */\nAuthor.defaultProps = {\n\tauthor: {\n\t\tID: -1,\n\t\tdisplay_name: \"\",\n\t\tuser_login: \"\",\n\t},\n\tclassName: \"\",\n};\n\n/**\n * define property types\n */\nAuthor.propTypes = {\n\tauthor: PropTypes.object.isRequired,\n\tindex: PropTypes.number.isRequired,\n\tonUnselect: PropTypes.func.isRequired,\n\tonChangePosition: PropTypes.func.isRequired,\n\tisMainAuthor: PropTypes.bool.isRequired,\n};\n\n/**\n * export component to public\n */\nexport default Author;","import Search from \"./Search\";\nimport {useAdditionalAuthors, useMainAuthor} from \"../hooks/use-post\";\nimport Author from \"./Author\";\n\nconst Plugin = (props)=>{\n    const {\n        users,\n        i18n,\n    } = props;\n\n    const mainAuthor = useMainAuthor();\n    const [selected, setSelected] = useAdditionalAuthors();\n\n    const onSelectSearchItem = (user)=>{\n        const newSelection = [...new Set([...selected, user.ID])];\n        setSelected(newSelection);\n        document.dispatchEvent(\n            new CustomEvent(\n                \"onAdditionalAuthorsChange\",\n                {\n                    detail: newSelection.map( id=> users.find( u=> parseInt(u.ID) === parseInt(id) ) )\n                }\n            )\n        );\n    }\n\n    const onChangePosition = (from, to) => {\n        const userIdFrom = selected[from];\n        const userIdTo = selected[to];\n        const newSelection = [...selected]\n        newSelection[from] = userIdTo;\n        newSelection[to] = userIdFrom;\n        setSelected(newSelection);\n    }\n\n    const onUnselect = (id)=>{\n        setSelected(selected.filter(_id => parseInt(_id) !== parseInt(id)))\n    }\n\n    return <div style={{marginBottom: 20}}>\n\n        <Search\n            i18n={i18n}\n            users={users.filter(u => {\n                const notSelected = !selected.includes(u.ID+\"\") && !selected.includes( parseInt(u.ID));\n                if(!notSelected) console.debug(u.ID, notSelected);\n                return notSelected && parseInt(u.ID) !== parseInt(mainAuthor);\n            })}\n            onFound={onSelectSearchItem}\n        />\n        <div>\n        {selected\n            .filter(id => parseInt(mainAuthor) !== parseInt(id))\n            .map((id, index)=>{\n            return <Author\n                key={id}\n                author={users.find(u=> parseInt(u.ID) === parseInt(id))}\n                index={index}\n                onChangePosition={(to)=>onChangePosition(index, to)}\n                onUnselect={()=>onUnselect(id)}\n                isMainAuthor={false}\n                />\n        })}\n        </div>\n    </div>;\n}\n\nexport default Plugin;","import { registerPlugin } from '@wordpress/plugins';\nimport { PluginPostStatusInfo } from '@wordpress/edit-post';\nimport Plugin from \"./gutenberg/Plugin.js\";\n\nconst AdditionalAuthorsPlugin = () => (\n    <PluginPostStatusInfo>\n        <Plugin\n            {...AdditionalAuthors}\n        />\n    </PluginPostStatusInfo>\n);\n\nregisterPlugin( 'post-status-info-test', { render: AdditionalAuthorsPlugin } );\n"],"names":["ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","module","exports","shim","props","propName","componentName","location","propFullName","secret","err","Error","name","getShim","isRequired","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","SearchResult","display_name","onClick","createElement","className","Search","i18n","users","onFound","state","setState","useState","isVisible","setIsVisible","results","setResults","useEffect","filter","u","toLowerCase","includes","useEscapeKey","callback","dependencies","enabled","onKeyDown","addEventListener","removeEventListener","BaseControl","TextControl","label","value","onChange","onFocus","Popover","focusOnMount","position","length","map","user","ID","search_404","useMainAuthor","author","useSelect","select","getCurrentPost","getPostEdits","Delete","ProfileLink","href","target","Author","index","onUnselect","onChangePosition","user_nicename","defaultProps","user_login","propTypes","isMainAuthor","mainAuthor","selected","setSelected","useAdditionalAuthors","authors","additional_authors","authorsEdited","editPost","useDispatch","additionalAuthors","id","parseInt","userIds","style","marginBottom","notSelected","console","debug","newSelection","Set","document","dispatchEvent","CustomEvent","detail","find","to","from","userIdFrom","userIdTo","_id","registerPlugin","render","AdditionalAuthorsPlugin","PluginPostStatusInfo","Plugin","AdditionalAuthors"],"sourceRoot":""}